<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhoneMatch AI - Asisten Pemilihan HP Berdasarkan Aktivitas dan Budget</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Phone<span>Match</span> AI</div>
                <nav>
                    <ul>
                        <li><a href="#home">Beranda</a></li>
                        <li><a href="#features">Fitur</a></li>
                        <li><a href="#quiz">Quiz</a></li>
                        <li><a href="#about">Tentang</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h1>Temukan HP yang Tepat untuk Anda</h1>
            <p>Asisten AI yang didukung Google Gemini untuk rekomendasi smartphone yang personal dan akurat</p>
            <a href="#quiz" class="cta-button">Mulai Quiz Sekarang</a>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2>Mengapa Memilih PhoneMatch AI?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h3>Google Gemini AI</h3>
                    <p>Menggunakan teknologi AI terdepan dari Google untuk analisis mendalam dan rekomendasi yang personal</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üí∞</div>
                    <h3>Sesuai Budget</h3>
                    <p>Rekomendasi yang disesuaikan dengan anggaran Anda, dari entry-level hingga flagship</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3>Personalisasi</h3>
                    <p>Analisis mendalam tentang aktivitas dan preferensi Anda untuk rekomendasi yang tepat sasaran</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <h3>Database Terkini</h3>
                    <p>Akses ke informasi smartphone terbaru dengan spesifikasi dan review yang komprehensif</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Analisis Real-time</h3>
                    <p>Dapatkan rekomendasi yang dihasilkan AI dalam hitungan detik dengan analisis yang mendalam</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üß†</div>
                    <h3>Smart Reasoning</h3>
                    <p>AI yang memahami konteks dan memberikan penjelasan logis untuk setiap rekomendasi</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Quiz Section -->
    <section class="quiz-section" id="quiz">
        <div class="container">
            <div class="quiz-container">
                <h2>Quiz Pemilihan HP</h2>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
                
                <!-- Quiz Step 1 -->
                <div class="quiz-step active">
                    <h3>Berapa budget yang Anda siapkan untuk membeli HP?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-value="budget-low">
                            <h4>< 2 Juta</h4>
                            <p>Entry Level</p>
                        </div>
                        <div class="quiz-option" data-value="budget-mid">
                            <h4>2-5 Juta</h4>
                            <p>Mid Range</p>
                        </div>
                        <div class="quiz-option" data-value="budget-high">
                            <h4>5-10 Juta</h4>
                            <p>Premium</p>
                        </div>
                        <div class="quiz-option" data-value="budget-flagship">
                            <h4>> 10 Juta</h4>
                            <p>Flagship</p>
                        </div>
                    </div>
                    <div class="quiz-navigation">
                        <button class="quiz-nav-btn" disabled>Kembali</button>
                        <button class="quiz-nav-btn primary" id="nextBtn" disabled>Selanjutnya</button>
                    </div>
                </div>

                <!-- Quiz Step 2 -->
                <div class="quiz-step">
                    <h3>Apa aktivitas utama Anda dengan HP?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-value="gaming">
                            <h4>üéÆ Gaming</h4>
                            <p>Mobile gaming, streaming game</p>
                        </div>
                        <div class="quiz-option" data-value="photography">
                            <h4>üì∏ Fotografi</h4>
                            <p>Foto, video, editing</p>
                        </div>
                        <div class="quiz-option" data-value="business">
                            <h4>üíº Bisnis</h4>
                            <p>Email, dokumen, video call</p>
                        </div>
                        <div class="quiz-option" data-value="entertainment">
                            <h4>üé¨ Entertainment</h4>
                            <p>Streaming, media, music</p>
                        </div>
                        <div class="quiz-option" data-value="social">
                            <h4>üì± Social Media</h4>
                            <p>Instagram, TikTok, WhatsApp</p>
                        </div>
                        <div class="quiz-option" data-value="basic">
                            <h4>‚òéÔ∏è Penggunaan Dasar</h4>
                            <p>Telepon, SMS, aplikasi ringan</p>
                        </div>
                    </div>
                    <div class="quiz-navigation">
                        <button class="quiz-nav-btn" onclick="prevStep()">Kembali</button>
                        <button class="quiz-nav-btn primary" id="nextBtn2" disabled>Selanjutnya</button>
                    </div>
                </div>

                <!-- Quiz Step 3 -->
                <div class="quiz-step">
                    <h3>Fitur mana yang paling penting untuk Anda?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-value="battery">
                            <h4>üîã Battery Life</h4>
                            <p>Daya tahan baterai lama</p>
                        </div>
                        <div class="quiz-option" data-value="camera">
                            <h4>üì∑ Kamera</h4>
                            <p>Kualitas foto dan video</p>
                        </div>
                        <div class="quiz-option" data-value="performance">
                            <h4>‚ö° Performance</h4>
                            <p>Kecepatan dan responsivitas</p>
                        </div>
                        <div class="quiz-option" data-value="storage">
                            <h4>üíæ Storage</h4>
                            <p>Kapasitas penyimpanan</p>
                        </div>
                        <div class="quiz-option" data-value="display">
                            <h4>üì∫ Display</h4>
                            <p>Kualitas layar dan refresh rate</p>
                        </div>
                        <div class="quiz-option" data-value="design">
                            <h4>üé® Design</h4>
                            <p>Desain dan kualitas build</p>
                        </div>
                    </div>
                    <div class="quiz-navigation">
                        <button class="quiz-nav-btn" onclick="prevStep()">Kembali</button>
                        <button class="quiz-nav-btn primary" id="nextBtn3" disabled>Dapatkan Rekomendasi AI</button>
                    </div>
                </div>

                <!-- Loading -->
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Google Gemini sedang menganalisis preferensi Anda...</p>
                </div>

                <!-- Error -->
                <div class="error">
                    <p>Terjadi kesalahan saat menghubungi AI. Silakan coba lagi.</p>
                </div>

                <!-- Results -->
                <div class="results">
                    <h2>Rekomendasi AI untuk Anda</h2>
                    <div class="phone-recommendation">
                        <h3 id="recommendedPhone">Loading...</h3>
                        <div class="recommendation-reason" id="recommendationReason">
                            AI sedang menganalisis preferensi Anda...
                        </div>
                        <div class="phone-specs">
                            <div class="spec-item">
                                <h4>Processor</h4>
                                <p id="processor">-</p>
                            </div>
                            <div class="spec-item">
                                <h4>RAM</h4>
                                <p id="ram">-</p>
                            </div>
                            <div class="spec-item">
                                <h4>Storage</h4>
                                <p id="storage">-</p>
                            </div>
                            <div class="spec-item">
                                <h4>Camera</h4>
                                <p id="camera">-</p>
                            </div>
                            <div class="spec-item">
                                <h4>Battery</h4>
                                <p id="battery">-</p>
                            </div>
                            <div class="spec-item">
                                <h4>Harga Estimasi</h4>
                                <p id="price">-</p>
                            </div>
                        </div>
                    </div>
                    <button class="cta-button" onclick="restartQuiz()">Ulangi Quiz</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2024 PhoneMatch AI. Powered by Google Gemini. Temukan HP yang tepat untuk Anda!</p>
        </div>
    </footer>

    <script>
        let currentStep = 0;
        let quizAnswers = {};
        const totalSteps = 3;

        // Ganti dengan API key Anda
        const GEMINI_API_KEY = 'AIzaSyD1NVfTUEt9kouLjLdufx4muuX1BFsoMC0';
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent';

        // Initialize quiz
        document.addEventListener('DOMContentLoaded', function() {
            setupQuizListeners();
            updateProgress();
        });

        function setupQuizListeners() {
            // Remove previous listeners to avoid duplicate events
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.onclick = null;
            });

            // Add click event for each quiz option
            options.forEach(option => {
                option.addEventListener('click', function () {
                    const step = this.closest('.quiz-step');
                    // Remove 'selected' from all options in this step
                    step.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');

                    // Enable the next button for this step
                    const nextBtn = step.querySelector('.quiz-nav-btn.primary');
                    if (nextBtn) nextBtn.disabled = false;

                    // Store answer
                    const stepIndex = Array.from(document.querySelectorAll('.quiz-step')).indexOf(step);
                    quizAnswers[stepIndex] = this.dataset.value;
                });
            });

            // Next button listeners
            document.getElementById('nextBtn').onclick = nextStep;
            document.getElementById('nextBtn2').onclick = nextStep;
            document.getElementById('nextBtn3').onclick = generateAIRecommendation;
        }

        // Add this function to restart the quiz
        function restartQuiz() {
            currentStep = 0;
            quizAnswers = {};
            // Remove all selected options
            document.querySelectorAll('.quiz-option.selected').forEach(opt => opt.classList.remove('selected'));
            // Disable all next buttons except the first
            document.getElementById('nextBtn').disabled = true;
            document.getElementById('nextBtn2').disabled = true;
            document.getElementById('nextBtn3').disabled = true;
            // Hide results and loading, show first quiz step
            document.querySelector('.results').classList.remove('active');
            document.querySelector('.loading').classList.remove('active');
            updateQuizStep();
            updateProgress();
        }

        function nextStep() {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                updateQuizStep();
                updateProgress();
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateQuizStep();
                updateProgress();
            }
        }

        function updateQuizStep() {
            const steps = document.querySelectorAll('.quiz-step');
            steps.forEach((step, index) => {
                step.classList.toggle('active', index === currentStep);
            });
        }

        function updateProgress() {
            const progress = ((currentStep + 1) / totalSteps) * 100;
            document.querySelector('.progress-fill').style.width = progress + '%';
        }

        async function generateAIRecommendation() {
            // Hide quiz steps and show loading
            document.querySelectorAll('.quiz-step').forEach(step => step.classList.remove('active'));
            document.querySelector('.loading').classList.add('active');
            document.querySelector('.error').classList.remove('active');

            try {
                // Prepare prompt based on user answers
                const budget = getBudgetText(quizAnswers[0]);
                const activity = getActivityText(quizAnswers[1]);
                const priority = getPriorityText(quizAnswers[2]);

                const prompt = `Saya membutuhkan rekomendasi smartphone dengan kriteria berikut:
- Budget: ${budget}
- Aktivitas utama: ${activity}
- Prioritas fitur: ${priority}

Tolong berikan rekomendasi smartphone yang tepat dalam format JSON dengan struktur:
{
  "recommendedPhone": "Nama HP",
  "processor": "Nama processor",
  "ram": "Kapasitas RAM",
  "storage": "Kapasitas storage",
  "camera": "Spesifikasi kamera",
  "battery": "Kapasitas baterai",
  "price": "Harga estimasi",
  "reason": "Penjelasan mengapa HP ini cocok untuk user (maksimal 3 kalimat)"
}

Pastikan rekomendasi sesuai dengan budget dan kebutuhan yang disebutkan. Berikan harga dalam Rupiah dan spesifikasi yang akurat untuk tahun 2024.`;

                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-goog-api-key': GEMINI_API_KEY
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                const aiResponse = data.candidates[0].content.parts[0].text;
                
                // Parse JSON response
                const jsonMatch = aiResponse.match(/\{[\s\S]*\}/);
                if (jsonMatch) {
                    const recommendation = JSON.parse(jsonMatch[0]);
                    displayRecommendation(recommendation);
                } else {
                    throw new Error('Invalid AI response format');
                }

            } catch (error) {
                console.error('Error calling Gemini API:', error);
                showError();
            }
        }

        function displayRecommendation(recommendation) {
            // Hide loading and show results
            document.querySelector('.loading').classList.remove('active');
            document.querySelector('.results').classList.add('active');

            // Update recommendation display
            document.getElementById('recommendedPhone').textContent = recommendation.recommendedPhone;
            document.getElementById('processor').textContent = recommendation.processor;
            document.getElementById('ram').textContent = recommendation.ram;
            document.getElementById('storage').textContent = recommendation.storage;
            document.getElementById('camera').textContent = recommendation.camera;
            document.getElementById('battery').textContent = recommendation.battery;
            document.getElementById('price').textContent = recommendation.price;
            document.getElementById('recommendationReason').textContent = recommendation.reason;
        }

        function showError() {
            document.querySelector('.loading').classList.remove('active');
            document.querySelector('.error').classList.add('active');
            
            // Show fallback recommendation
            setTimeout(() => {
                document.querySelector('.error').classList.remove('active');
                displayFallbackRecommendation();
            }, 3000);
        }

        function displayFallbackRecommendation() {
            // Fallback recommendation based on quiz answers
            const fallbackRecommendations = {
                'budget-low': {
                    recommendedPhone: 'Xiaomi Redmi Note 13',
                    processor: 'Snapdragon 4 Gen 2',
                    ram: '6GB',
                    storage: '128GB',
                    camera: '108MP Triple',
                    battery: '5000mAh',
                    price: 'Rp 1.899.000',
                    reason: 'Pilihan terbaik untuk budget terbatas dengan performa yang solid dan kamera yang baik untuk daily use.'
                },
                'budget-mid': {
                    recommendedPhone: 'Samsung Galaxy A55',
                    processor: 'Exynos 1480',
                    ram: '8GB',
                    storage: '256GB',
                    camera: '50MP Triple',
                    battery: '5000mAh',
                    price: 'Rp 4.499.000',
                    reason: 'Smartphone mid-range dengan performa seimbang, kamera berkualitas, dan daya tahan baterai yang excellent.'
                },
                'budget-high': {
                    recommendedPhone: 'iPhone 15',
                    processor: 'A16 Bionic',
                    ram: '6GB',
                    storage: '128GB',
                    camera: '48MP Dual',
                    battery: '3349mAh',
                    price: 'Rp 8.999.000',
                    reason: 'Flagship dengan performa premium, kamera canggih, dan ecosystem Apple yang terintegrasi sempurna.'
                },
                'budget-flagship': {
                    recommendedPhone: 'Samsung Galaxy S24 Ultra',
                    processor: 'Snapdragon 8 Gen 3',
                    ram: '12GB',
                    storage: '256GB',
                    camera: '200MP Quad',
                    battery: '5000mAh',
                    price: 'Rp 18.999.000',
                    reason: 'Smartphone flagship ultimate dengan S Pen, kamera terdepan, dan performa maksimal untuk semua kebutuhan.'
                }
            };

            const budget = quizAnswers[0];
            const recommendation = fallbackRecommendations[budget];
            
            displayRecommendation(recommendation);
        }

        function getBudgetText(budget) {
            const budgetMap = {
                'budget-low': 'Di bawah 2 juta rupiah',
                'budget-mid': '2-5 juta rupiah',
                'budget-high': '5-10 juta rupiah',
                'budget-flagship': 'Di atas 10 juta rupiah'
            };
            return budgetMap[budget] || 'Tidak ditentukan';
        }

        function getActivityText(activity) {
            const activityMap = {
                'gaming': 'Gaming mobile dan streaming game',
                'photography': 'Fotografi dan videografi',
                'business': 'Keperluan bisnis (email, dokumen, video call)',
                'entertainment': 'Entertainment (streaming, media, musik)',
                'social': 'Social media (Instagram, TikTok, WhatsApp)',
                'basic': 'Penggunaan dasar (telepon, SMS, aplikasi ringan)'
            };
            return activityMap[activity] || 'Tidak ditentukan';
        }

       
        function getPriorityText(priority) {
            const priorityMap = {
                'battery': 'Daya tahan baterai yang lama',
                'camera': 'Kualitas kamera terbaik',
                'performance': 'Performa tinggi dan responsif',
                'storage': 'Kapasitas penyimpanan besar',
                'display': 'Layar berkualitas dan refresh rate tinggi',
                'design': 'Desain dan kualitas build premium'
            };
            return priorityMap[priority] || 'Tidak ditentukan';
        }
    </script>
</body>
</html>